<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Ff4a31901-0df4-491c-8095-54dc5f2c3ee0%2F53a97201353a95520a82fdb1d503a8c8.jpg?table=collection&amp;id=74a62b98-1675-4b15-8a05-99552918b9f1">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>Build GA&nbsp;|&nbsp;Hi! </title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="Build GA">
  
    <meta name="description" content="Configuration process and solutions to some odd issues on GA">
    <meta property="og:description" content="Configuration process and solutions to some odd issues on GA">
  
  
    <meta property="og:image" content="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;👉&lt;/text&gt;&lt;/svg&gt;">
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Ff4a31901-0df4-491c-8095-54dc5f2c3ee0%2F53a97201353a95520a82fdb1d503a8c8.jpg?table=collection&amp;id=74a62b98-1675-4b15-8a05-99552918b9f1"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😀&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>About Me</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="ga.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;👉&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>Build GA</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="sr.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;👉&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>Cloud Render &amp; Super-Resolution</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="se.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;👉&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>Symbolic Execution</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="rc.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;👉&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>Reversible Computing</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="sop.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;👉&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>SOP</span>
        </div>
      </a>
    
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
      <div class="Header__Icon">
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;👉&lt;/text&gt;&lt;/svg&gt;"></span>
      </div>
    
    <h1 class="Header__Title">Build GA</h1>
    
  </header>
  <article id="https://www.notion.so/c57834cb06c74b11b31eaae4a0a126c8" class="PageRoot"><div id="https://www.notion.so/72afa200d4744fe78d288507477622b8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">GA是一个开源的实现云游戏的引擎，并且高效、跨平台、易扩展、可调配，官网 → </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://gaminganywhere.org/">https://gaminganywhere.org/</a></span></span></p></div><div id="https://www.notion.so/76b5e8c8804242a7a51850b494128a86" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/530e50c05c6f49198b2db459442afe99" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">打算用电脑 WSL 上的 Ubuntu 作服务器，Android 平板当客户端</span></span></p></div><blockquote id="https://www.notion.so/1d9c603259284ce6ba1afc52aa169c17" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">源码： </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/chunying/gaminganywhere">https://github.com/chunying/gaminganywhere</a></span></span></blockquote><div id="https://www.notion.so/d4f2ffdb14494683bb45ec6713879e9e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/1d60553a737f49f490b15c259119fe61" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">首先要</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">编辑一下 env-setup 文件，修改其中的 GADEPS 变量值，比如我就修改为工程目录：</strong></strong></span></span><pre id="https://www.notion.so/dd7993763a6b49818e2342ad1ec90794" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>#!/bin/sh
export GADEPS=/home/donny/Desktop/gaminganywhere/deps.posix
export PKG_CONFIG_PATH=$GADEPS/lib/pkgconfig:/opt/local/lib/pkgconfig:/usr/lib/i386-linux-gnu/pkgconfig/:/usr/lib/pkgconfig
export PATH=$GADEPS/bin:$PATH</span></span></span></code></pre></li><li id="https://www.notion.so/afb1723b314d4bb5acfbf7226bc958de" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">记得 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">source env-setup</code></span><span class="SemanticString"> 一下</span></span></li><li id="https://www.notion.so/799c22dc00a645b3936699d2b066744f" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">进入</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">deps.src</code></span><span class="SemanticString">目录 make 一下，发现报错：</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedBg SemanticString__Fragment--BgGray">ERROR: x265 not found using pkg-config</mark></code></span></span><div id="https://www.notion.so/0837d25d0a1c4fa4a1d0af34f9902c0b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">看一下日志文件 config.log， 发现有提示我们需要将编译 x265 生成的 x265.pc 所在的文件夹配置成环境变量：</span></span></p></div><pre id="https://www.notion.so/87bac342e9ba481d81fb5c57c7dddd2a" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>export PKG_CONFIG_PATH=/home/donny/Desktop/gaminganywhere/deps.posix/lib/pkgconfig</span></span></span></code></pre><div id="https://www.notion.so/85907b85cae640b1937412009af9accb" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">或者还有人说执行：</span></span></p></div><pre id="https://www.notion.so/fa26374ede5e496d83b31d05740098db" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>sudo apt<span class="token operator">-</span><span class="token keyword">get</span> install libx265<span class="token operator">-</span>dev</span></span></span></code></pre></li><li id="https://www.notion.so/f2a8b1bc78664c0d8f24f030b7e9f89c" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString">重新编译仍有报错：</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">error: ‘x264_bit_depth’ undeclared</code></span></span><div id="https://www.notion.so/93d8e29aec844621b74ee04687a20f57" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">看 github 也有人提出了这个 issue，问题原因是新版本的 x264 中把这一变量换成了大写😂</span></span></p></div><div id="https://www.notion.so/0a0b005bd9fd431a8d0486d422e3022f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">解决方法：</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/1da8a9f937634384b6c72b66935d9097" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">Replace &quot;</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">x264_bit_depth</strong></span><span class="SemanticString">&quot; with &quot;</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">X264_BIT_DEPTH</strong></span><span class="SemanticString">&quot; in your ffmpeg-2.8.8/libx264.c file.</span></span></li><li id="https://www.notion.so/c9b3e19378414f6db597197620ecab43" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">Then retar the ffmpeg package with command: </span><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">tar -cjf ffmpeg-2.8.8.tar.bz2 ffmpeg-2.8.8</em></span></span></li><li id="https://www.notion.so/34e13b05e4c04567ad649657b2c4313d" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">make</em></span></span></li></ol></li><li id="https://www.notion.so/5b6ed1d4acb34872901298bbce2f6a94" class="NumberedList" value="5"><span class="SemanticStringArray"><span class="SemanticString">But 还有报错：</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">fatal error: xlocale.h: No such file or directory</code></span></span><div id="https://www.notion.so/c2a0c615856c4b6bb400ef5c8f43b055" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">新版本 Ubuntu 不支持 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">xlocale.h</code></span></span></p></div><div id="https://www.notion.so/bac4b0d4b53047c3b19c7321c813f403" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">软链接一下即可：</span></span></p></div><pre id="https://www.notion.so/63cf7cf05b7e413ea8edecf01c40f352" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>ln -s /usr/include/locale.h /usr/include/xlocale.h</span></span></span></code></pre></li><li id="https://www.notion.so/ee4d8d50dad3404eb2722ff62dd7074d" class="NumberedList" value="6"><span class="SemanticStringArray"><span class="SemanticString">终于 make 成功！</span></span></li><li id="https://www.notion.so/902b5fa09bde4f52890e562e83df7ec4" class="NumberedList" value="7"><span class="SemanticStringArray"><span class="SemanticString">去 /ga 目录继续编译:</span></span><pre id="https://www.notion.so/8b3ad3df12c044a5aad6e3362667aeeb" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>cd ../ga
make all
make install</span></span></span></code></pre></li><li id="https://www.notion.so/be62becf06fb4c11b98d5097f2c97507" class="NumberedList" value="8"><span class="SemanticStringArray"><span class="SemanticString">编译完记得在新建一个 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">/etc/ld.so.conf.d/gaminganywhere.conf</code></span><span class="SemanticString">文件，将 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">deps.posix</code></span><span class="SemanticString"> 库的路径添加进去，再执行 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ldconfig</code></span><span class="SemanticString"> 链接。这是比较方便的方法，也可以修改 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">/etc/profile</code></span><span class="SemanticString"> 添加系统路径</span></span></li><li id="https://www.notion.so/2a3ba06ba4d04ef188226a4906a571ba" class="NumberedList" value="9"><span class="SemanticStringArray"><span class="SemanticString">报错：</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">fatal error: liveMedia.hh: No such file or directory</code></span></span><div id="https://www.notion.so/3bd7cec82f444a21afabfe312f4c59a2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">其实很简单，前面 GADEPS 变量的修改在 ga 的 Makefile 里也要改，不然找不到依赖啊</span></span></p></div></li><li id="https://www.notion.so/e56906da0e0445be8500acd57b14cc5c" class="NumberedList" value="10"><span class="SemanticStringArray"><span class="SemanticString">为了运行游戏，我找了一个开源游戏 Minetest，安装过程如下：</span></span><pre id="https://www.notion.so/c036c4b849a24a2a81fe0a718ad7cc52" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>sudo add-apt-repository ppa:minetestdevs/stable
sudo apt-get update
sudo apt-get install minetest</span></span></span></code></pre></li><li id="https://www.notion.so/d1e2f16baf1640a694b8115d5e019dae" class="NumberedList" value="11"><span class="SemanticStringArray"><span class="SemanticString">写一个配置文件 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">server.minetest.linux.conf</code></span></span><pre id="https://www.notion.so/b69f2b06c19b4ff7a0001298c9d3f746" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span># configuration for the openttd game
# work with ga-server-periodic

[core]
include = common/server-common.conf
include = common/controller.conf
include = common/video-x264.conf
include = common/video-x264-param.conf
include = common/audio-lame.conf

[ga-server-periodic]
display = :0
find-window-name = Minetest 5.7.0 [Main Menu]

enable-audio = true</span></span></span></code></pre></li><li id="https://www.notion.so/8a5207627ee547e8af9c5b6a815f513b" class="NumberedList" value="12"><span class="SemanticStringArray"><span class="SemanticString">进入 bin 目录，启动服务器:</span></span><div id="https://www.notion.so/1ee4c18ec0754e3d8c2462fd52b7e38e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"></span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">./ga-server-periodic ../ga/config/server.minetest.linux.conf</code></span></span></p></div></li></ol></article>
  <footer class="Footer">
  <div>&copy; Hi!  2022</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>