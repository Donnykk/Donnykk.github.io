<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Ff4a31901-0df4-491c-8095-54dc5f2c3ee0%2F53a97201353a95520a82fdb1d503a8c8.jpg?table=collection&amp;id=74a62b98-1675-4b15-8a05-99552918b9f1">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>Build GA&nbsp;|&nbsp;Hi! </title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="Build GA">
  
  
    <meta property="og:image" content="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;👉&lt;/text&gt;&lt;/svg&gt;">
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Ff4a31901-0df4-491c-8095-54dc5f2c3ee0%2F53a97201353a95520a82fdb1d503a8c8.jpg?table=collection&amp;id=74a62b98-1675-4b15-8a05-99552918b9f1"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😀&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>About Me</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="se.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;👉&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>Symbolic Execution</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="rc.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;👉&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>Reversible Computing</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="sop.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;👉&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>SOP</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="ga.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;👉&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>Build GA</span>
        </div>
      </a>
    
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
      <div class="Header__Icon">
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;👉&lt;/text&gt;&lt;/svg&gt;"></span>
      </div>
    
    <h1 class="Header__Title">Build GA</h1>
    
  </header>
  <article id="https://www.notion.so/c57834cb06c74b11b31eaae4a0a126c8" class="PageRoot"><div id="https://www.notion.so/72afa200d4744fe78d288507477622b8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">GA是一个开源的实现云游戏的引擎，并且高效、跨平台、易扩展、可调配，官网 → </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://gaminganywhere.org/">https://gaminganywhere.org/</a></span></span></p></div><div id="https://www.notion.so/f514ac4a434247f1b274157642367bc2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/a8e24b6ff3864f42b575353ae23ee303" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">打算用电脑 WSL 上的 Ubuntu 作服务器，Android 平板当客户端</span></span></p></div><blockquote id="https://www.notion.so/284834667a92478bbbf48684c9e2777d" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">源码： </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/chunying/gaminganywhere">https://github.com/chunying/gaminganywhere</a></span></span></blockquote><div id="https://www.notion.so/d586c988eedd445b8b3b4e51d47024d3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/279ea183cbad4181bf961704504e77d2" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">首先要</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">编辑一下 env-setup 文件，修改其中的 GADEPS 变量值，比如我就修改为工程目录：</strong></strong></span></span><pre id="https://www.notion.so/0bd8e6fbaad44a7f9359d034794a7a6d" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>#!/bin/sh
export GADEPS=/home/donny/Desktop/gaminganywhere/deps.posix
export PKG_CONFIG_PATH=$GADEPS/lib/pkgconfig:/opt/local/lib/pkgconfig:/usr/lib/i386-linux-gnu/pkgconfig/:/usr/lib/pkgconfig
export PATH=$GADEPS/bin:$PATH</span></span></span></code></pre></li><li id="https://www.notion.so/15633482062b43a6b0dd3b8d76c555ab" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">记得 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">source env-setup</code></span><span class="SemanticString"> 一下</span></span></li><li id="https://www.notion.so/e20f2401e91348e7912611a0c696bfb9" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">进入</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">deps.src</code></span><span class="SemanticString">目录 make 一下，发现报错：</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedBg SemanticString__Fragment--BgGray">ERROR: x265 not found using pkg-config</mark></code></span></span><div id="https://www.notion.so/636d6290d84d48d3bef2ace52382a7b2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">看一下日志文件 config.log， 发现有提示我们需要将编译 x265 生成的 x265.pc 所在的文件夹配置成环境变量：</span></span></p></div><pre id="https://www.notion.so/06dda9036de34bbf832455a236966131" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>export PKG_CONFIG_PATH=/home/donny/Desktop/gaminganywhere/deps.posix/lib/pkgconfig</span></span></span></code></pre></li><li id="https://www.notion.so/2794077452cc4eea99d32c517dd94223" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString">重新编译仍有报错：</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">error: ‘x264_bit_depth’ undeclared</code></span></span><div id="https://www.notion.so/62bb32a71ee449318acfd4fa74bcfa28" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">看 github 也有人提出了这个 issue，问题原因是新版本的 x264 中把这一变量换成了大写😂</span></span></p></div><div id="https://www.notion.so/8fda4f4c7ecf40eda6457e9bb2e68404" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">解决方法：</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/a18d4b2d2a4d4ef8b65df280d05d0321" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">Replace &quot;</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">x264_bit_depth</strong></span><span class="SemanticString">&quot; with &quot;</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">X264_BIT_DEPTH</strong></span><span class="SemanticString">&quot; in your ffmpeg-2.8.8/libx264.c file.</span></span></li><li id="https://www.notion.so/d7cb422cbaaf42e1ac0caf61464269c5" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">Then retar the ffmpeg package with command: </span><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">tar -cjf ffmpeg-2.8.8.tar.bz2 ffmpeg-2.8.8</em></span></span></li><li id="https://www.notion.so/70c18d86c919483790b58aedf0d29c2f" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">make</em></span></span></li></ol></li><li id="https://www.notion.so/56ef484c3a6541bd9fb79b9fd82232be" class="NumberedList" value="5"><span class="SemanticStringArray"><span class="SemanticString">But 还有报错：</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">fatal error: xlocale.h: No such file or directory</code></span></span><div id="https://www.notion.so/b1b8520a76604635be876e02bf4de186" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">新版本 Ubuntu 不支持 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">xlocale.h</code></span></span></p></div><div id="https://www.notion.so/0beffbe314ec420fa2c30e89d756d875" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">软链接一下即可：</span></span></p></div><pre id="https://www.notion.so/59d9692a9c5c4caf820f5d7cb31c0bad" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>ln -s /usr/include/locale.h /usr/include/xlocale.h</span></span></span></code></pre></li><li id="https://www.notion.so/d6e616a220cb4fc3a58d308a239d1d61" class="NumberedList" value="6"><span class="SemanticStringArray"><span class="SemanticString">终于 make 成功！</span></span></li><li id="https://www.notion.so/18cf0c078c2440c2a10580c1fd666301" class="NumberedList" value="7"><span class="SemanticStringArray"><span class="SemanticString">去 /ga 目录继续编译:</span></span><pre id="https://www.notion.so/db16b7b67276448e8730e5219e8e7531" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>cd ../ga
make all
make install</span></span></span></code></pre></li><li id="https://www.notion.so/a5e6e7e894e64c5f8fab0601c10dc47c" class="NumberedList" value="8"><span class="SemanticStringArray"><span class="SemanticString">报错：</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">fatal error: liveMedia.hh: No such file or directory</code></span></span><div id="https://www.notion.so/382a1112fdcf48ad9b9de423d2c916f6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">其实很简单，前面 GADEPS 变量的修改在 ga 的 Makefile 里也要改，不然找不到依赖啊</span></span></p></div></li><li id="https://www.notion.so/16ba70d3017b4c5faf988f194d6bf910" class="NumberedList" value="9"><span class="SemanticStringArray"><span class="SemanticString">为了运行游戏，我找了一个开源游戏 Minetest，安装过程如下：</span></span><pre id="https://www.notion.so/b0a491a13fb5464c99d6167eb9c9b312" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>sudo add-apt-repository ppa:minetestdevs/stable
sudo apt-get update
sudo apt-get install minetest</span></span></span></code></pre><div id="https://www.notion.so/11e377e97b2b42a0bfb2d72165a5eb91" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">但是运行 add-apt-repository 指令后一直 hang 着没有响应（暂未解决）</span></span></p></div><div id="https://www.notion.so/cde2b959164a4cd09b135ed3e22ede34" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">先通过直接修改 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">/etc/apt/sources.list.d </code></span><span class="SemanticString">凑合一下</span></span></p></div></li><li id="https://www.notion.so/649aa2bb02a146f797b7c62dd9fe5006" class="NumberedList" value="10"><span class="SemanticStringArray"><span class="SemanticString">写一个配置文件 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">server.minetest.linux.conf</code></span></span><pre id="https://www.notion.so/54e4e1d1f1f846d082301106aca9f94f" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span># configuration for the openttd game
# work with ga-server-periodic

[core]
include = common/server-common.conf
include = common/controller.conf
include = common/video-x264.conf
include = common/video-x264-param.conf
include = common/audio-lame.conf

[ga-server-periodic]
display = :0
find-window-name = Minetest 5.7.0 [Main Menu]

enable-audio = true</span></span></span></code></pre></li><li id="https://www.notion.so/860e7c3d4573488aa13ceefba56e95d6" class="NumberedList" value="11"><span class="SemanticStringArray"><span class="SemanticString">进入 bin 目录，启动服务器:</span></span><div id="https://www.notion.so/96ad359e5b534b7c89768f9fd1011fd5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"></span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">./ga-server-periodic ../ga/config/server.minetest.linux.conf</code></span></span></p></div></li><li id="https://www.notion.so/aab24a859c4146eebaaca626b701bf49" class="NumberedList" value="12"><span class="SemanticStringArray"><span class="SemanticString">启动客户端连接主机 IP，发现同一局域网下也 ping 不通 WSL，防火墙也关了，找一下微软的官方文档可以发现，WSL2 确实还不支持 WSL 和主机在同一网段，所以 WSL 和我同一局域网内的设备确实并不能互ping</span></span></li></ol><div id="https://www.notion.so/70ace14ef12b44ca85d84f6c61016092" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div></article>
  <footer class="Footer">
  <div>&copy; Hi!  2022</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>